---
title: MySQL
date: 2022-11-12T16:00:24Z
lastmod: 2023-02-28T12:47:48Z
---

# MySQL

　　**MDL (Metadata lock)  ​**元数据锁: 常见由create、 alter、 drop和truncate四个关键字完成的SQL语句

　　**DDL（Data Definition Languages）语句：**数据定义语言，这些语句定义了不同的数据段、数据库、表、列、索引等数据库对象的定义。常用的语句关键字主要包括 create、drop、alter等。

　　**DML（Data Manipulation Language）语句：**数据操纵语句，用于添加、删除、更新和查询数据库记录，并检查数据完整性，常用的语句关键字主要包括 insert、delete、udpate 和select 等。(增添改查）

　　**DCL（Data Control Language）语句：**数据控制语句，用于控制不同数据段直接的许可和访问级别的语句。这些语句定义了数据库、表、字段、用户的访问权限和安全级别。主要的语句关键字包括 grant、revoke 等。

## 事务

### 隔离性（ACID）

* 原子性（最小单位）
* 一致性 （数据的正确性，）
* 隔离性（不同事务之间的更改不可见）
* 持久性（落入磁盘）

### 产生问题

* 脏读（dirty read）

  * 在不同事务下，当前事务可以读到另外事务未提交的数据
* 不可重复读（non-repeatable read）

  * 同一个事务多次读取相同的数据，结果不一致，强调数据的修改。
* 幻读（phantom read）

  * 在一个事务中，两次读取，其中一次读取到其他事务插入的数据，强调数据的增删。

### 隔离级别（SQL标准规定）

* 读未提交是指，一个事务还没提交时，它做的变更就能被别的事务看到。

  * 会产生脏读，幻读，不可重复读
* 读提交是指，一个事务提交之后，它做的变更才会被其他事务看到。

  * 会产生幻读，不可重复读
* 可重复读是指，（mysql默认隔离级别）一个事务执行过程中看到的数据，总是跟这个事务在启动时看到的数据是一致的。当然在可重复读隔离级别下，未提交变更对其他事务也是不可见的。

  * 会产生幻读，**但是mysql采用MVCC（多版本控制）和间隙锁避免了幻读。**
* 串行化，顾名思义是对于同一行记录，“写”会加“写锁”，“读”会加“读锁”。当出现读写锁冲突的时候，后访问的事务必须等前一个事务执行完成，才能继续执行。

　　[MYSQL事务和锁详解见](siyuan://blocks/20221030195551-gwii7a2)

　　‍
